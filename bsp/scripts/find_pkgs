# find_pkgs
# Copyright RidgeRun 2015
#
# This script provides a list of packages beginning with the string 
# given as parameter from the myapps, fs-apps and proprietary directories 
#
# Usage
# find_pkgs <package>
#

#PATHS
MYAPPS="$DEVDIR/myapps"
FS_APPS="$DEVDIR/fs/apps"
PROPRIETARY="$DEVDIR/proprietary"
SEARCH_PATHS="$MYAPPS $FS_APPS $PROPRIETARY"

PKG="$1"
PKG_FOUND=""

# dependencies
# - Generated by outputting every component in its own line.
function dependencies_out {

 for i in $SEARCH_PATHS
 do
	deps=`ls -v -d -1 $i/$PKG* 2>/dev/null`
	if [[ ! -z $deps ]]; then
		PKG_FOUND="true"
		for j in $deps
		do
			echo $j
		done
	fi
 done
 
 #check if at least one package found
 if [ -z $PKG_FOUND ]; then
	exit 1
 else
	exit 0
 fi

}

dependencies_out $PKG
